#! /usr/bin/env bash

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Must be executed at the same level.

rep=$(pwd); [ "${0%/*}" = "." ] || exit 1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Raspberry Pi 4 Model B.

if [[ $OSTYPE =~ linux-gnueabihf ]]; then
    CPUTYPE="`lscpu`"
    if [[ $CPUTYPE =~ "Cortex-A72" ]]; then
        echo "RPI4"
        exit 0
    fi
fi

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Basic platform handler.

case "$OSTYPE"  in
    darwin*)    cd Spaghettis/Builds/MacOSX ;
                xcodebuild -configuration Release ;
                rm -r build/Spaghettis.build ;;
    linux*)     echo "Linux" ;;
    *)          exit 1 ;;
esac

# make CONFIG=Release TARGET_ARCH="-mcpu=cortex-a72 -mtune=cortex-a72 -mfpu=neon-fp-armv8"
# xcodebuild -configuration Release

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------
