#! /usr/bin/env bash

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Must be executed at the same level.

rep=$(pwd); [ "${0%/*}" = "." ]     || exit 1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

./Build.sh                          || exit 1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

cd ${rep}/Tutorials/Plugins
./Build.sh                          || exit 1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

cd ${rep}/Spaghettis/Modules/T
./Build.sh                          || exit 1
./tests                             || exit 1


# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# It is enough to check the symbol table only on macOS.

case "$OSTYPE"  in
    darwin*)    ./Symbols.py ;;
    *)          exit 1 ;;
esac

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

