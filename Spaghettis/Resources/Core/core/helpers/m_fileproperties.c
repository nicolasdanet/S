
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "../../m_spaghettis.h"
#include "../../m_core.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

PD_LOCAL t_error fileproperties_set (t_fileproperties *p, char *filepath)
{
    t_error err = string_copy (p->f_directory, PD_STRING, filepath);
    
    if (err) { fileproperties_clear (p); PD_BUG; }
    else {
        char *t = NULL; if ((t = strrchr (p->f_directory, '/'))) { *t = 0; p->f_name = t + 1; }
    }
    
    return err;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
