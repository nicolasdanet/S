
/* Copyright (c) 2024 Spaghettis and others. */

/* < https://www.gnu.org/licenses/agpl-3.0.en.html > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

PresetsView::PresetsView (const std::vector<PresetElement>& v, const PropertyLookAndFeel& base) :
    base_ (base)
{
    ViewCommon::buildPanel (v, base_, *this);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

juce::Font PresetsView::getFont() const
{
    return base_.getFont();
}

juce::String PresetsView::getName() const
{
    return juce::String (NEEDS_TRANS ("Parameters"));
}

juce::ConcertinaPanel& PresetsView::getConcertinaPanel()
{
    return panel_;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void PresetsView::resizeConcertinaPanel (const juce::Rectangle<int>& bounds)
{
    panel_.setBounds (bounds);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void PresetsView::addPanel (juce::PropertyPanel* p)
{
    auto h = std::make_unique<PresetsViewHeader> (p->getName(),this);
    
    panel_.addPanel (-1, p, true);
    panel_.setCustomPanelHeader (p, h.release(), true);
    panel_.setPanelHeaderSize (p, base_.getRequiredHeight() + 6);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
