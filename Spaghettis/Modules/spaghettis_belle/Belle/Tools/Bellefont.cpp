
/* 
    Copyright (c) 2007-2013 Andi Brae.
    Copyright (c) 2013 Jojo and others.
    
*/

/* < http://opensource.org/licenses/BSD-2-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* Turn binary bellefont to .hpp file to be embedded inside the executable. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#define BELLE_COMPILE_INLINE

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "../Source/Belle.hpp"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

using namespace prim;
using namespace belle;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* LLVM analyzer seems to report false positives. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#ifndef __clang_analyzer__

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void bellefont (const std::string& name, int first = 0, int last = -1)
{
    std::string filepath;
    
    filepath += "../../../Resources/Bellefont/";
    filepath += name;
    filepath += ".bellefont";

    Array<byte> input;

    if (File::readToArray (filepath.c_str(), input)) {
    //
    Typeface typeface;

    Array<byte> output;
    
    typeface.importBinary (&input[0]);
    typeface.crop (first, last);
    typeface.exportBinary (output);
    
    File::writeByString ((name + ".hpp").c_str(), Binary::make (name + "Bellefont", output));
    //
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

int main()
{
    bellefont ("Petrucci");
    bellefont ("Joie", 10);
    bellefont ("GentiumBasicRegular", 1, 90);
    bellefont ("GentiumBasicBold", 1, 90);
    bellefont ("GentiumBasicItalic", 1, 90);
    bellefont ("GentiumBasicBoldItalic", 1, 90);
    
    return 0;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#endif // __clang_analyzer__

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
