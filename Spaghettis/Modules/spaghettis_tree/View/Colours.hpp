
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace spaghettis::core {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

struct Colours {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static juce::String getDisplayStringFromColour (const juce::Colour& colour)
{
    return colour.toDisplayString (true);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static juce::String getColourAsString (const juce::Colour& c)
{
    return c.toString().paddedLeft ('0', 8);
}

static juce::Colour getColourFromString (const juce::String& s)
{
    return juce::Colour::fromString (s.length() == 8 ? s : "ff000000");
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static juce::Colour getColourFromValue (const juce::Value& v)
{
    return getColourFromString (v.toString());
}

static void setValueWithColour (juce::Value& v, const juce::Colour& c)
{
    v.setValue (getColourAsString (c));
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace juce {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

template<> struct VariantConverter<Colour> {

static Colour fromVar (const var& v)
{
    return Colour (spaghettis::core::Colours::getColourFromString (v.toString()));
}
    
static var toVar (const juce::Colour& c)
{
    return var (spaghettis::core::Colours::getColourAsString (c));
}

};

template<> struct VariantConverter<Rectangle<int>> {

static Rectangle<int> fromVar (const var& v)
{
    return Rectangle<int>::fromString (v.toString());
}
    
static var toVar (const Rectangle<int>& r)
{
    return var (r.toString());
}

};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace juce
