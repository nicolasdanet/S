
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "../../m_headers.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void devices_initialize (t_devices *d)
{
    int i;

    for (i = 0; i < DEVICES_MAXIMUM_IO; i++) {
    //
    d->d_in[i]  = NULL;
    d->d_out[i] = NULL;
    //
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

/* Check that devices still exist. */

void devices_setAudio (t_devices *d, t_devices *from)
{
    t_audiodevices l; audio_getListOfDevices (&l);
    
    int i, k;

    for (i = 0, k = 0; i < DEVICES_MAXIMUM_IO; i++) {
        t_symbol *s = from->d_in[i];
        if (audiodevices_hasAudioIn (&l, s)) {
            d->d_in[k++] = s;
        }
    }
    
    for (i = 0, k = 0; i < DEVICES_MAXIMUM_IO; i++) {
        t_symbol *s = from->d_out[i];
        if (audiodevices_hasAudioOut (&l, s)) {
            d->d_out[k++] = s;
        }
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
