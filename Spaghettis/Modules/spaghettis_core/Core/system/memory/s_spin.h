
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef S_SPIN_H_
#define S_SPIN_H_

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

typedef pthread_mutex_t t_spin;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static inline void spin_init (t_spin *mutex)
{
    pthread_mutex_init (mutex, NULL);
}

static inline void spin_destroy (t_spin *mutex)
{
    pthread_mutex_destroy (mutex);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static inline int spin_trylock (t_spin *mutex)
{
    return pthread_mutex_trylock (mutex);
}

static inline void spin_lock (t_spin *mutex)
{
    pthread_mutex_lock (mutex);
}

static inline void spin_unlock (t_spin *mutex)
{
    pthread_mutex_unlock (mutex);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
#endif // S_SPIN_H_
