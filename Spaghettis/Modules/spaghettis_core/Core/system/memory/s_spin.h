
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef S_SPIN_H_
#define S_SPIN_H_

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

typedef pthread_mutex_t t_trylock;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static inline void trylock_init (t_trylock *mutex)
{
    pthread_mutex_init (mutex, NULL);
}

static inline void trylock_destroy (t_trylock *mutex)
{
    pthread_mutex_destroy (mutex);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static inline int trylock_trylock (t_trylock *mutex)
{
    return pthread_mutex_trylock (mutex);
}

static inline void trylock_lock (t_trylock *mutex)
{
    pthread_mutex_lock (mutex);
}

static inline void trylock_unlock (t_trylock *mutex)
{
    pthread_mutex_unlock (mutex);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
#endif // S_SPIN_H_
