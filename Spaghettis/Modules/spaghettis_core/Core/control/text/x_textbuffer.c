
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#include "../../m_headers.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "x_text.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

void textbuffer_init (t_textbuffer *x, t_glist *owner)
{
    x->tb_buffer = buffer_new();
    x->tb_owner  = owner;
}

void textbuffer_free (t_textbuffer *x)
{
    buffer_free (x->tb_buffer);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

t_glist *textbuffer_getOwner (t_textbuffer *x)
{
    return x->tb_owner;
}

t_buffer *textbuffer_getBuffer (t_textbuffer *x)
{
    return x->tb_buffer;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void textbuffer_read (t_textbuffer *x, t_symbol *s)
{
    if (buffer_fileRead (x->tb_buffer, s, x->tb_owner, cast_object (x))) {
        error_failsToRead (cast_object (x), s);
    }
}

void textbuffer_write (t_textbuffer *x, t_symbol *s)
{
    if (buffer_fileWrite (x->tb_buffer, s, environment_getDirectory (glist_getEnvironment (x->tb_owner)))) {
        error_failsToWrite (cast_object (x), s);
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
