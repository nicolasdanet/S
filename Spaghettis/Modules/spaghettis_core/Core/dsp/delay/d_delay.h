
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef D_DELAY_H_
#define D_DELAY_H_

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

/* Note that all values (after creation) of the delay lines are used in DSP thread only. */
/* Thus no need of mutex machinery. */

typedef struct delwrite_tilde_control {
    int                         dw_size;
    int                         dw_phase;
    int                         dw_allocated;
    t_sample                    *dw_vector;
    } t_delwrite_tilde_control;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

typedef struct _delwrite_tilde {
    t_object                    dw_obj;                     /* Must be the first. */
    t_id                        dw_identifier;
    t_delwrite_tilde_control    dw_space;
    t_symbol                    *dw_name;
    } t_delwrite_tilde;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#define DELAY_EXTRA_SAMPLES     4       /* Required for 4-points interpolation. */
#define DELAY_ROUND_SAMPLES     4

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
#endif // D_DELAY_H_
