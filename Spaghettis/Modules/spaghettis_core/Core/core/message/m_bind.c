
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "../../m_headers.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

int message_isPrivateSymbol (t_symbol *);

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void pd_bind (t_pd *x, t_symbol *s)
{
    PD_ASSERT (!message_isPrivateSymbol (s));
    
    bindlist_add (s, x);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static t_error pd_unbindProceed (t_pd *x, t_symbol *s)
{
    PD_ASSERT (!message_isPrivateSymbol (s));
    
    return bindlist_remove (s, x);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void pd_unbindQuiet (t_pd *x, t_symbol *s)
{
    pd_unbindProceed (x, s);
}

void pd_unbind (t_pd *x, t_symbol *s)
{
    t_error err = pd_unbindProceed (x, s);
    
    PD_ASSERT (!err); PD_UNUSED (err);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
