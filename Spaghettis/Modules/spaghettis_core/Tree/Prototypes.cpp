
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace core {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

juce::ValueTree Prototypes::create (const Invariant& i)
{
    juce::ValueTree t (Ids::PROTOTYPE);
    
    Invariant::setProperties (t, i); prototypes_.push_back (t);
    
    return t;
}

juce::ValueTree Prototypes::getOrCreate (const Invariant& i)
{
    for (const auto& p : prototypes_) { if (p.getProperty (Ids::key).toString() == i.key) { return p; } }
    
    return create (i);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace core

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
