
/* Copyright (c) 2021 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis::core {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

void moveChildAt (juce::ValueTree& tree, int i, core::UniqueId u)
{
    const int n = tree.indexOf (Tree::getChild (tree, u));
    
    jassert (n != -1);
    
    tree.moveChild (n, i, nullptr);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void Patch::sortObjects (const std::vector<core::UniqueId>& v)
{
    int i = 1;     /* Notice that DATA node is the first. */
    
    /* Check it? */
    
    for (auto u : v) { moveChildAt (tree_, i++, u); }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
