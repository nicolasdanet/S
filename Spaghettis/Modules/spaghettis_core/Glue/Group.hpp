
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace core {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

class Group {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    explicit Group (const juce::ValueTree& group = juce::ValueTree()) : group_ (group)
    {
    }
    
    ~Group() = default;
    
public:
    Group (const Group&) = default;
    Group (Group&&) = default;
    Group& operator = (const Group&) = default;
    Group& operator = (Group&&) = default;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    juce::String getName() const;
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    bool hasParameter (const juce::String&) const;
    
public:
    Parameter addParameter (const juce::String&, bool);
    Parameter addParameter (const juce::String&, juce::Colour c);
    Parameter addParameter (const juce::String&, int n);
    Parameter addParameter (const juce::String&, double f);
    Parameter addParameter (const juce::String&, const juce::String& s);

public:
    Parameter getParameter (const juce::String&) const;
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    bool isValid() const;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

class Iter {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    Iter (const juce::ValueTree::Iterator& iterator) : iterator_ (iterator) { }
    Iter& operator ++() { ++iterator_; return *this; }
    bool operator == (const Iter& iter) const { return iterator_ == iter.iterator_; }
    bool operator != (const Iter& iter) const { return iterator_ != iter.iterator_; }
    Parameter operator *() const { return Parameter (*iterator_); }

private:
    juce::ValueTree::Iterator iterator_;
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    Iter begin() const { return Iter (group_.begin()); }
    Iter end() const   { return Iter (group_.end());   }

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

private:
    juce::ValueTree group_;
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace core

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
