
/* Copyright (c) 2023 Spaghettis and others. */

/* < https://www.gnu.org/licenses/agpl-3.0.en.html > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

class EditDistance {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    EditDistance (const juce::String& key) : key_ (key), length_ (key.length())
    {
    }

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

/* Look for items that contains the key as substring. */
/* Prefer those near to the start. */

public:
    int distanceToKey (const juce::String& s) const
    {
        const int n = s.length();
        
        if (n >= length_) {
            const int i = s.indexOf (key_);
            if (i >= 0) {
                return (i * prefixed_) + ((n - i - length_) * suffixed_);
            }
        }
        
        return -1;
    }

private:
    juce::String key_;
    int length_;

private:
    static constexpr int prefixed_ = 3;
    static constexpr int suffixed_ = 1;
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

