
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void addDocumentationForClass (core::Item& i, const juce::String& c)
{
    const juce::String name     = juce::String ("info_") + c + juce::String ("_xml");
    int n = 0; const char* data = BinaryData::getNamedResource (name.toRawUTF8(), n);
    
    if (n && data) {
    //
    i.getData().addParametersFromXml (juce::String::createStringFromData (data, n));
    //
    }
}

void addDocumentation (core::Item& i)
{
    addDocumentationForClass (i, i.get<juce::String> (Tags::Attributes, Tags::Class));
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

core::Item Documentation::copy (const core::Item& item)
{
    core::Item i (core::Item::createCopy (item));
    
    if (i.isObject() && !i.isPatch()) { addDocumentation (i); }
    
    return i;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
