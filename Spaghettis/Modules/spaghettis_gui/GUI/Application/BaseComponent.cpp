
/* Copyright (c) 2021 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

IconsButton* fetchButton (juce::Toolbar* toolbar, int itemId)
{
    jassert (toolbar); const int n = toolbar->getNumItems();
    
    for (int i = 0; i < n; ++i) {
    //
    if (toolbar->getItemId (i) == itemId) {
        IconsButton* b = dynamic_cast<IconsButton*> (toolbar->getItemComponent (i));
        jassert (b);
        return b;
    }
    //
    }
    
    return nullptr;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

bool BaseComponent::getButtonState (int itemId)
{
    IconsButton* b = fetchButton (toolbar_.get(), itemId);
        
    if (b && b->isToggle()) { return b->getState(); } else { jassertfalse; return false; }
}


void BaseComponent::setButtonState (int itemId, bool shouldBeOn)
{
    IconsButton* b = fetchButton (toolbar_.get(), itemId);
        
    if (b && b->isToggle()) { b->setState (shouldBeOn); } else { jassertfalse; }
}
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
