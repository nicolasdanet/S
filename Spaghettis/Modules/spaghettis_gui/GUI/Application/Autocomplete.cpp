
/* Copyright (c) 2023 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

Autocomplete::Autocomplete() : contentHasChanged_ (false)
{

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void Autocomplete::addContent (const juce::String& s)
{
    content_.addIfNotAlreadyThere (s); contentHasChanged_ = true;
}

juce::StringArray Autocomplete::getContent (const juce::String& key)
{
    if (contentHasChanged_) { initialize(); contentHasChanged_ = false; }
    
    if (key.isNotEmpty()) { return getContentByKey (key); }
    else {
        return content_;
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void Autocomplete::initialize()
{
    content_.sortNatural();
    
    v_.clear(); v_.reserve (content_.size());
    
    for (auto& s : content_) { v_.emplace_back (s.toStdString(), 0); }
}

// std::numeric_limits<int>::max()

juce::StringArray Autocomplete::getContentByKey (const juce::String& s)
{
    return content_;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
