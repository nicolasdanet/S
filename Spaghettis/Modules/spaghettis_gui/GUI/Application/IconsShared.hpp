
/* Copyright (c) 2021 Nicolas Danet. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "BinaryData.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

struct Icons {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

enum IconsIds : int {
    add     = 1,
    clear,
    error,
    notification,
    place,
    remove,
    synchronize,
    sortUp,
    sortDown
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

};
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

struct IconsShared {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

using DrawableContainer = std::vector<std::unique_ptr<juce::Drawable>>;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    IconsShared()
    {
        addIcon ("add_svg");
        addIcon ("delete_forever_svg");
        addIcon ("warning_amber_svg");
        addIcon ("notifications_svg");
        addIcon ("place_svg");
        addIcon ("remove_svg");
        addIcon ("sync_svg");
        addIcon ("text_rotate_up_svg");
        addIcon ("text_rotation_down_svg");
    }

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

private:
    std::unique_ptr<juce::Drawable> getIconRaw (int itemId, const DrawableContainer& c) const
    {
        int i = itemId - 1;
        
        jassert (i >= 0);
        jassert (static_cast<DrawableContainer::size_type> (i) < c.size());
        jassert (c[i] != nullptr);
        
        return c[i]->createCopy();
    }
    
public:
    std::unique_ptr<juce::Drawable> getIconOff (int itemId) const
    {
        return getIconRaw (itemId, off_);
    }

    std::unique_ptr<juce::Drawable> getIconOn (int itemId) const
    {
        return getIconRaw (itemId, on_);
    }
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

private:
    void addIconRaw (const void* data, const size_t n, juce::Colour colour, DrawableContainer& c)
    {
        std::unique_ptr<juce::Drawable> t (juce::Drawable::createFromImageData (data, n));
        t->replaceColour (juce::Colours::black, colour);
        c.push_back (std::move (t));
    }
    
    void addIcon (const char* name)
    {
        int n = 0; const char* data = BinaryData::getNamedResource (name, n);
        jassert (data);
        addIconRaw (data, n, Spaghettis()->getColour (Colours::toolbarIconOn), on_);
        addIconRaw (data, n, Spaghettis()->getColour (Colours::toolbarIconOff), off_);
    }
    
private:
    DrawableContainer on_;
    DrawableContainer off_;
};
 
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

