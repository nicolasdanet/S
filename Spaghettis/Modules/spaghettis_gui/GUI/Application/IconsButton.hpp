
/* Copyright (c) 2021 Nicolas Danet. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

class IconsButton : public juce::ToolbarButton {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    IconsButton (int itemId) :  juce::ToolbarButton (itemId,
                                    "",
                                    Icons::getInstance().getIconOff (itemId),
                                    Icons::getInstance().getIconOn (itemId)),
                                itemId_ (itemId),
                                isToggle_ (Icons::getInstance().isToggle (itemId))
                                
    {
        if (isToggle_) { setClickingTogglesState (true); }
        else {
            setToggleState (true, juce::dontSendNotification);
        }
    }
    
    ~IconsButton() = default;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

bool getToolbarItemSizes (int thickness, bool isVertical, int& size, int& min, int& max) override
{
    DBG (thickness);
    
    return juce::ToolbarButton::getToolbarItemSizes (thickness, isVertical, size, min, max);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    int getItemId() const
    {
        return itemId_;
    }
    
    bool isToggle() const
    {
        return isToggle_;
    }
    
private:
    int itemId_;
    bool isToggle_;
    
private:
    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (IconsButton)
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

