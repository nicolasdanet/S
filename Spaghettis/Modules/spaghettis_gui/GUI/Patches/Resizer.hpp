
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

class Resizer {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    explicit Resizer (juce::Component& c) :
        owner_ (c),
        edge_ (&c, &constrainer_, juce::ResizableEdgeComponent::leftEdge)
    {
        constrainer_.setMinimumWidth (minimumWidth_);
        edge_.setAlwaysOnTop (true);
        owner_.addAndMakeVisible (edge_);
        owner_.setSize (defaultWidth_, owner_.getHeight());
    }
    
    ~Resizer() = default;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    void update()
    {
        edge_.setBounds (owner_.getLocalBounds().withWidth (minimumWidth_));
    }

private:
    juce::Component& owner_;
    juce::ComponentBoundsConstrainer constrainer_;
    juce::ResizableEdgeComponent edge_;

private:
    static constexpr int defaultWidth_ = 200;
    static constexpr int minimumWidth_ = 4;
    
private:
    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (Resizer)
};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

