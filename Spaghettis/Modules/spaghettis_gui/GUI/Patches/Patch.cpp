
/* Copyright (c) 2021 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void Patch::requestCloseDialog()
{
    juce::MessageBoxOptions options (juce::MessageBoxOptions().withTitle (file_.getFileName())
        .withMessage (NEEDS_TRANS ("Save the patch before closing?"))
        .withButton (NEEDS_TRANS ("Yes"))
        .withButton (NEEDS_TRANS ("No")));
    
    auto f = [u = u_](int result)
    {
        const bool save = (result == 0); Spaghettis()->getPatches().handleCloseRequest (u, save);
    };
    
    juce::NativeMessageBox::showAsync (options, f);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
