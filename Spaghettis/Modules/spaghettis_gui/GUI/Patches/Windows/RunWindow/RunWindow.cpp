
/* Copyright (c) 2022 Spaghettis and others. */

/* < https://www.gnu.org/licenses/agpl-3.0.en.html > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

RunWindow::RunWindow (const PatchBase& base) : PatchWindow (base)
{
    setContentOwned (new RunComponent (base), true);
    
    auto t = getPatchRoot().getPresetsManager().getRunWindow();
    auto r = t.value_or (getPatch().get<juce::Rectangle<int>> (Tag::Attributes, Tag::EditView));
    
    makeVisible (r, false);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void RunWindow::hasBeenMovedOrResized()
{
    if (isFullyInitialized()) { getPatchRoot().getPresetsManager().setRunWindow (getBounds()); }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
