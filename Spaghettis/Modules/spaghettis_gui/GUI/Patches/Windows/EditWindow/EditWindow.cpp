
/* Copyright (c) 2022 Spaghettis and others. */

/* < https://www.gnu.org/licenses/agpl-3.0.en.html > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

EditWindow::EditWindow (const PatchBase& base) : PatchWindow (base)
{
    content_ = std::make_unique<EditComponent> (base);
    
    setContentNonOwned (content_.get(), true);
    
    makeVisible (getPatch().get<juce::Rectangle<int>> (Tag::Attributes, Tag::EditView), isLocked());
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

bool EditWindow::locate (core::UniqueId u)
{
    return content_->locate (u);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void EditWindow::hasBeenMovedOrResized()
{
    if (isFullyInitialized()) { Broadcast::editView (getIdentifier(), getBounds()); }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
