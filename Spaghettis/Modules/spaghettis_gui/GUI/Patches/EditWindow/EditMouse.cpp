
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

std::vector<core::UniqueId> getAllSelectedObjects (const juce::ValueTree& tree)
{
    std::vector<core::UniqueId> v;
    
    for (const auto& t : tree) {
    //
    if (t.hasType (Ids::OBJECT) || t.hasType (Ids::PATCH)) {
        core::Object o (t); if (o.getAttribute<bool> (Tags::Selected)) { v.push_back (o.getIdentifier()); }
    }
    //
    }
        
    return v;
}

void deselectAll (const juce::ValueTree& tree)
{
    std::vector<core::UniqueId> v (getAllSelectedObjects (tree));
    
    for (const auto& i : v) { EditCommands::deselect (i); }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void EditView::mouseDown (const juce::MouseEvent& e)
{
    if (Mouse::isSimpleClick (e)) { deselectAll (viewTree_); }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void EditView::selectAll()
{
    DBG ("???");
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
