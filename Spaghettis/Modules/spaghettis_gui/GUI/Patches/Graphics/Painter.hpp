
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

struct Painter {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if JUCE_DEBUG

static std::function<void()> repaint (juce::Component* component)
{
    return [c = juce::Component::SafePointer<juce::Component> (component)]()
    {
        if (c.getComponent()) { c->repaint(); } else { jassertfalse; }
    };
}

static std::function<void()> resize (juce::Component* component, PainterPolicy *painter)
{
    return [c = juce::Component::SafePointer<juce::Component> (component), p = painter]()
    {
        if (c.getComponent()) { c->setBounds (p->getBounds()); } else { jassertfalse; }
    };
}

#else

static std::function<void()> repaint (juce::Component* component)
{
    return [c = component]() { c->repaint(); };
}

static std::function<void()> resize (juce::Component* component, PainterPolicy *painter)
{
    return [c = component, p = painter]() { c->setBounds (p->getBounds()); };
}

#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

};

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace spaghettis

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
