
/* Copyright (c) 2022 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

auto isSameObjectAs (const core::Object& object)
{
    const core::UniqueId identifier = object.getIdentifier();
    
    return [i = identifier] (const std::unique_ptr<ObjectComponent>& p)
    {
        return (p->getIdentifier() == i);
    };
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void ObjectsList::add (const core::Object& object)
{
    v_.push_back (std::make_unique<ObjectComponent> (owner_, object));
}

void ObjectsList::remove (const core::Object& object)
{
    v_.erase (std::remove_if (v_.begin(), v_.end(), isSameObjectAs (object)), v_.end());
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
