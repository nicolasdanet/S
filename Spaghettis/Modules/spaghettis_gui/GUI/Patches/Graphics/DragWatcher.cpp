
/* Copyright (c) 2023 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

DragWatcher::DragWatcher (View* view) : view_ (view), isDrag_ (false)
{
}

DragWatcher::~DragWatcher()
{
    if (isDrag_) {
        if (auto view = View::asEditView (view_)) {
            view->handleMouseDragAbort();
        }
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void DragWatcher::handleMouseDrag (const juce::MouseEvent& e)
{
    isDrag_ = true;     if (auto view = View::asEditView (view_)) { view->handleMouseDragFromPin (e); }
}

void DragWatcher::handleMouseUp (const juce::MouseEvent& e)
{
    isDrag_ = false;    if (auto view = View::asEditView (view_)) { view->handleMouseUp (e); }
}
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
