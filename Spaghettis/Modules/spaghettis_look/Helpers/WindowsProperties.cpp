
/* Copyright (c) 2023 Jojo and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace spaghettis {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

namespace {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

int fetchTitleHeight (juce::Component *c)
{
    juce::ComponentPeer *p = c->getPeer();
    
    jassert (p);
    
    const juce::ComponentPeer::OptionalBorderSize frameSize = p->getFrameSizeIfPresent();
    
    if (frameSize) { return frameSize->getTop(); }
    else {
        return 0;
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

/* Cache the window title height (assume that it doesn't change once successfully fetched). */

int WindowsProperties::getTitleHeight (juce::Component *c)
{
    static int h = 0;
    
    if (h == 0) { h = fetchTitleHeight (c); }
    
    return h;
}

int WindowsProperties::getMenuBarHeight()
{
    return 28;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
