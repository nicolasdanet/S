
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "../../m_headers.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#define FIFO8_SIZE      131072      /* Must be a power of two. */
#define FIFO8_BYTES     1

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

t_fifo8 *fifo8_new (void)
{
    return (t_fifo8 *)fifo_shared_new (FIFO8_SIZE, FIFO8_BYTES);
}

void fifo8_free (t_fifo8 *x)
{
    fifo_shared_free ((t_fifo *)x);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

int fifo8_getAvailableRead (t_fifo8 *x)
{
    return fifo_shared_getAvailableRead ((t_fifo *)x);
}

int fifo8_getAvailableWrite (t_fifo8 *x)
{
    return fifo_shared_getAvailableWrite ((t_fifo *)x, FIFO8_SIZE);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

int fifo8_write (t_fifo8 *x, const void *data, int n)
{
    return fifo_shared_write ((t_fifo *)x, FIFO8_SIZE, FIFO8_BYTES, data, n);
}

int fifo8_read (t_fifo8 *x, void *data, int n)
{
    return fifo_shared_read ((t_fifo *)x, FIFO8_SIZE, FIFO8_BYTES, data, n);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
