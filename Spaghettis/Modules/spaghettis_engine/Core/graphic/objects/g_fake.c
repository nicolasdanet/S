
/* Copyright (c) 1997 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#include "../../m_headers.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* Hard coded values and workarounds. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#define FAKE_FONT   16

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

int gui_getInletWidth()
{
    return FAKE_FONT * 3;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

static int gui_getBoundingBoxWidth (t_object *x)
{
    t_class *c = pd_class (x);
    
    if (c == garray_class) { return gui_getWidth (cast_gui (x)); }
    
    return FAKE_FONT * buffer_getSize (object_getBuffer (x));
}

static int gui_getBoundingBoxHeight (t_object *x)
{
    t_class *c = pd_class (x);
    
    if (c == garray_class) { return gui_getHeight (cast_gui (x)); }
    
    return FAKE_FONT;
}

t_rectangle gui_getBoundingBox (t_object *x)
{
    int a = object_getX (x);
    int b = object_getY (x);
    int c = a + gui_getBoundingBoxWidth (x);
    int d = b + gui_getBoundingBoxHeight (x);
        
    t_rectangle r;
    
    rectangle_set (&r, a, b, c, d);

    return r;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
